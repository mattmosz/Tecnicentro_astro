---
import Layout from '../../layouts/Layout.astro';
import '../../styles/dashboard.css';
---
<Layout title="Iniciar Sesión - TecniCentro">
  <main class="page">
    <div class="container" style="max-width:480px">
      <div class="card">
        <h1 style="margin-bottom:12px;">Iniciar Sesión</h1>
        <p class="muted" style="margin-bottom:16px;">Accede al panel administrativo</p>

        <form id="frmLogin" class="form">
          <div class="form-group">
            <label for="email">Email</label>
            <input id="email" class="form-control" type="email" required placeholder="admin@taller.com" />
          </div>
          <div class="form-group">
            <label for="pass">Contraseña</label>
            <input id="pass" class="form-control" type="password" required placeholder="••••••••" />
          </div>
          <button class="btn btn-orange" type="submit">Entrar</button>
        </form>
      </div>
    </div>
  </main>

  <script type="module">
    const form = document.getElementById('frmLogin');
    form?.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = (document.getElementById('email') as HTMLInputElement).value;
      const pass  = (document.getElementById('pass') as HTMLInputElement).value;

      // TODO: reemplaza por tu endpoint real de login
      // const r = await fetch('/api/auth/login', { method:'POST', body: JSON.stringify({ email, pass }) });
      // const data = await r.json();

      // DEMO: guarda un token y usuario con rol admin
      localStorage.setItem('token', 'demo-token');
      localStorage.setItem('user', JSON.stringify({ nombre:'Administrador', rol:'admin', email }));

      location.replace('/admin/dashboard');
    });
  </script>
</Layout>
